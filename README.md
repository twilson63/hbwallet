# hbwallet

A lightweight Lua-based command-line tool for generating Arweave JWK (JSON Web Key) wallets. Built with the Hype framework, hbwallet creates cryptographically secure 4096-bit RSA keys compatible with the Arweave blockchain.

<p align="center">
  <img src="https://img.shields.io/badge/Lua-5.1+-blue.svg" alt="Lua Version">
  <img src="https://img.shields.io/badge/License-MIT-green.svg" alt="License">
  <img src="https://img.shields.io/badge/Platform-Linux%20%7C%20macOS%20%7C%20Windows-lightgrey.svg" alt="Platform">
  <img src="https://img.shields.io/badge/Arweave-Compatible-orange.svg" alt="Arweave Compatible">
</p>

## 🚀 Features

- **🔐 Secure Key Generation**: Creates 4096-bit RSA keys meeting Arweave's security standards
- **🏗️ Single Binary**: Distributed as a standalone executable with no external dependencies
- **🌍 Cross-Platform**: Works on Linux, macOS, and Windows
- **⚡ Fast & Lightweight**: Minimal resource usage, instant wallet generation
- **📦 Standard Format**: Generates standard JWK format compatible with all Arweave tools
- **🎯 Simple CLI**: Just two commands for all wallet operations

## 📦 Installation

### Quick Install (Recommended)

```bash
curl -fsSL https://raw.githubusercontent.com/twilson63/hbwallet/main/install.sh | bash
```

### Manual Installation

1. Download the latest release for your platform from the [Releases](https://github.com/twilson63/hbwallet/releases) page
2. Extract the archive:
   ```bash
   tar -xzf hbwallet-*.tar.gz
   ```
3. Move to your PATH:
   ```bash
   sudo mv hbwallet /usr/local/bin/
   chmod +x /usr/local/bin/hbwallet
   ```

### Build from Source

```bash
git clone https://github.com/twilson63/hbwallet.git
cd hbwallet
make build
sudo make install
```

## 🎮 Usage

### Generate a New Wallet

```bash
# Output to stdout
hbwallet

# Save to file
hbwallet > my-wallet.json
```

### Extract Wallet Address

```bash
hbwallet public-key --file my-wallet.json
```

This outputs your 43-character Arweave wallet address.

## 💡 Examples

### Creating a New Wallet

```bash
$ hbwallet > my-arweave-wallet.json
$ cat my-arweave-wallet.json | jq .kty
"RSA"
```

### Getting Your Wallet Address

```bash
$ hbwallet public-key --file my-arweave-wallet.json
GRQ7swQO1AMyFgnuAPI7AvGQlW3lzuQuwlJbIpWV7xk
```

### Using with Arweave CLI

```bash
# Set your wallet for arweave-cli
export ARWEAVE_WALLET_PATH="$(pwd)/my-arweave-wallet.json"

# Or use directly with other tools
arweave deploy --key-file my-arweave-wallet.json
```

## 🔧 Technical Details

### Key Specifications

- **Algorithm**: RSA with PS512 (RSA-PSS with SHA-512)
- **Key Size**: 4096 bits
- **Public Exponent**: 65537 (0x10001)
- **Format**: JSON Web Key (JWK)
- **Encoding**: Base64URL (no padding)

### JWK Structure

```json
{
  "kty": "RSA",
  "n": "...",    // Modulus (4096 bits)
  "e": "AQAB",   // Public exponent (65537)
  "d": "...",    // Private exponent
  "p": "...",    // Prime 1
  "q": "...",    // Prime 2
  "dp": "...",   // Exponent 1
  "dq": "...",   // Exponent 2
  "qi": "..."    // Coefficient
}
```

### Address Generation

Arweave addresses are generated by:
1. Taking the RSA public modulus (`n`) from the JWK
2. Computing SHA-256 hash of the raw binary value
3. Base64URL encoding the hash result

## 🏗️ Architecture

hbwallet is built with modularity in mind:

```
hbwallet/
├── src/
│   ├── hbwallet.lua      # Main application logic
│   ├── crypto_openssl.lua # OpenSSL-based crypto (when available)
│   ├── jwk.lua           # Pure Lua JWK generation
│   └── sha256.lua        # SHA-256 implementation
├── test/                 # Comprehensive test suite
├── scripts/              # Build and release scripts
└── packaging/            # Platform-specific packaging
```

## 🧪 Testing

Run the test suite:

```bash
make test
```

Build and test:

```bash
make test-all
```

## 🚢 Releasing

hbwallet uses GitHub Actions for automated releases:

1. Update version in `VERSION` file
2. Create and push a tag:
   ```bash
   git tag -a v1.2.0 -m "Release v1.2.0"
   git push origin v1.2.0
   ```
3. GitHub Actions will automatically build and release for all platforms

## 🤝 Contributing

Contributions are welcome! Please feel free to submit a Pull Request. For major changes, please open an issue first to discuss what you would like to change.

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## 📄 License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## 🙏 Acknowledgments

- Built with the [Hype Framework](https://twilson63.github.io/hype)
- Inspired by [arweave-js](https://github.com/ArweaveTeam/arweave-js)
- Thanks to the Arweave community for documentation and support

## 🔗 Links

- [Arweave Documentation](https://docs.arweave.org)
- [JWK Specification (RFC 7517)](https://tools.ietf.org/html/rfc7517)
- [Hype Framework](https://twilson63.github.io/hype)

## ⚠️ Security Notice

- **Never share your private key (JWK file)** with anyone
- **Keep backups** of your wallet files in secure locations
- **Use strong passwords** if storing wallet files on cloud services
- Generated keys use system entropy for cryptographic security

## 📊 Compatibility

- ✅ Arweave mainnet
- ✅ Arweave testnet
- ✅ ArConnect wallet
- ✅ arweave-js SDK
- ✅ Bundlr Network
- ✅ All Arweave gateways

---

<p align="center">
Made with ❤️ for the Arweave ecosystem
</p>